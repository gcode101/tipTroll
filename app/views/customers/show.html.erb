 <p id="notice"> <%= notice %></p>
<div class="message" style="width:400px; height: 50px; background: green; color: white; display: none;"></div>
<p>
  <strong>Name:</strong>
  <%= @customer.name %>
</p>

<p>
  <strong>Email:</strong>
  <%= @customer.email %>
</p>

<p>How much would like you to contribute?</p>
<input value="" id="amount">
<button type="button" class="btn btn-primary" value="" id="charge">Pay Tip</button>
<!-- <button type="button" class="btn btn-primary">Primary</button> -->

<%= form_tag charges_path do %>


<script>
payAction = function() {
  var handler = StripeCheckout.configure({
    key: "<%= Rails.application.secrets[:stripe_publishable_key] %>",
    token: function(token) {
      var postData = {
        amount: parseFloat($('#amount').val()) * 100,
        stripeToken: token.id,
      }

      $.ajax({
                type: 'POST',
                url: '/charges',
                data: postData,
                success: function (reservation) {
                  $('.message').append('<h2>Thank you, you paid $<strong>' + $('#amount').val() + '</strong>!</h2>');
                  $('.message').show();
                },
                error: function (request, error) {
                  $('.message').append('<h2>We apologize but your payment did not go through.</h2>');
                  $('.message').show();
                }
            });
    }

  });


  $('#charge').on('click', function(e) {
    e.preventDefault();
    var total = parseFloat($('#amount').val()) * 100;
    handler.open({
              name: 'Tip',
              description: 'Input Your Payment Details',
              amount: total
          });
  });
}

$(document).ready(payAction);
</script>


<% end %>


<% if is_this_me?(@customer) %>
<%= link_to('Edit', edit_customer_path(@customer)) %>
<% end %>|

<%= link_to 'Locate Professionals', professionals_path%> |
<%= link_to 'Logout', logout_path %>



<h3>Average rating</h3>

<div class="average_rating" data-score="<%= @customer.average_rating %>"></div>

<h1>Ratings</h1>

<div class="user_rating"></div>

<script type="text/javascript">
	var score = <%= @customer.average_rating %>
</script>

<script type="text/javascript">
	var theScore = <%= @rating.score %>;
	var ratingId = <%= @rating.id %>;
  var ratingType = "<%= @rating.class.to_s %>";
	userRating(theScore, ratingId);
</script>

<div class="container">
<h2>My Favorites</h2>
  <div class="col-md-12">
    <div class="col-md-6">
      <% @favorites.each do |favorite| %>
        <%= Professional.find(favorite.professional_id).email %>
      <% end %>
    </div>
  </div>
</div>









